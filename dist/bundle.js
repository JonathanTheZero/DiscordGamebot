!function(e,a){for(var t in a)e[t]=a[t]}(exports,function(e){var a={};function t(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}return t.m=e,t.c=a,t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var n in e)t.d(o,n,function(a){return e[a]}.bind(null,n));return o},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=22)}([function(e,a,t){"use strict";function o(e){return new Promise(a=>setTimeout(a,e))}Object.defineProperty(a,"__esModule",{value:!0}),a.getBaseLog=function(e,a){return Math.log(a)/Math.log(e)},a.Sleep=o,Number.prototype.commafy=function(){return String(this).commafy()},String.prototype.commafy=function(){return this.replace(/(^|[^\w.])(\d{4,})/g,function(e,a,t){return a+t.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$&,")})},String.prototype.isNaN=function(){return isNaN(this)},a.rangeInt=function(e,a){return Math.floor(Math.random()*(a-e+1)+e)},a.reminder=async function(e,a,t,n){e.channel.send(t),await o(a),e.reply(n)}},function(e,a,t){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a};Object.defineProperty(a,"__esModule",{value:!0});const n=new(o(t(17)).MongoClient)("mongodb://localhost:27017/mydb"),r="mydb";async function i(e){return await n.db(r).collection("users").findOne({_id:e})}async function l(e){return await n.db(r).collection("alliances").findOne({name:e})}a.addUsers=async function(e){if(!e||0===e.length)return;await n.db(r).collection("users").insertMany(e)&&console.log("Successfully added")},a.getUser=i,a.getAlliance=l,a.updateValueForUser=async function(e,a,t,o="$set"){let i={};if("money"===a)i={[o]:{money:t}};else if("allianceRank"===a)i={$set:{allianceRank:t}};else if("alliance"===a)i={$set:{alliance:t}};else if("food"===a)i={[o]:{"resources.food":t}};else if("autoping"===a)i={[o]:{autoping:t}};else if("loan"===a)i={[o]:{loan:t}};else if("population"===a)i={[o]:{"resources.population":t}};else if("tag"===a)i={$set:{tag:t}};else if("payoutDMs"===a)i={$set:{payoutDMs:t}};else if("lastCrime"===a)i={$set:{lastCrime:t}};else if("lastWorked"===a)i={$set:{lastWorked:t}};else if("lastVoted"===a)i={$set:{lastWorked:t}};else{if("votingStreak"!==a)throw new Error("Invalid parameter passed");i={[o]:{votingStreak:t}}}n.db(r).collection("users").updateOne({_id:e},i,e=>{if(e)throw e})},a.updateValueForAlliance=async function(e,a,t,o="$set"){let i={};"money"===a&&(i={[o]:{money:t}}),n.db(r).collection("alliances").updateOne({name:e},i,e=>{if(e)throw e})},a.addUpgrade=async function(e,a,t){let o=(await i(e)).upgrades;o[t].push(a),n.db(r).collection("users").updateOne({_id:e},{$set:{upgrades:o}})},a.addPF=async function(e,a){let t=(await i(e)).upgrades.pf;t[a]+=1,n.db(r).collection("users").updateOne({_id:e},{$set:{upgrades:t}})},a.addAlliance=async function(e){if(!e)return;await n.db(r).collection("alliances").insertOne(e)&&console.log(`Successfully added ${e.name}`)},a.addAllianceUpgrade=async function(e,a){var t;let o=null===(t=await l(e))||void 0===t?void 0:t.upgrades;o[a]+=1,n.db(r).collection("alliances").updateOne({name:e},{$set:{upgrades:o}})},a.getAllUsers=async function(){return await n.db(r).collection("users").find({}).toArray()},a.getAllAlliances=async function(){return await n.db(r).collection("alliances").find({}).toArray()},a.connectToDB=function(){n.connect(e=>{if(e)throw e;console.log("Successfully connected"),n.db(r).createCollection("users"),n.db(r).createCollection("alliances")})}},function(e){e.exports={token:"NjI3MTIwNzkzNTE5OTE1MDE4.XY4B0Q.jkaoU4kCv-YOM233QFc2hA0jklc",dbl:{token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxOTkwOTIxNTk5NzM5NDk1NSIsImJvdCI6dHJ1ZSwiaWF0IjoxNTY5OTQ2NDMzfQ.7d-BLa6AHEUfQPnJkXSKpu7itprvc-V_NgQyyeIdbzg",auth:"superdupercoolutopiabot",url:"https://discordapp.com/api/webhooks/619909215997394955/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYxOTkwOTIxNTk5NzM5NDk1NSIsImJvdCI6dHJ1ZSwiaWF0IjoxNTY5OTQ2NDMzfQ.7d-BLa6AHEUfQPnJkXSKpu7itprvc-V_NgQyyeIdbzg"},prefix:",",lastPayout:1580477983,lastPopulationWorkPayout:1578766380,payoutChannel:"630470737664409630",botAdmins:[0x574b496fdc00000,0x84489b3a6c40000,0x51f6dafc9420000,0x58b8a9130400000],properties:{inviteLink:"https://discordapp.com/oauth2/authorize?client_id=619909215997394955&permissions=8&scope=bot",footer:{text:"Developed by Zero#0659  â€¢  Alpha",icon_url:"https://cdn.discordapp.com/avatars/393137628083388430/859a09db38539b817b67db345274f653.webp?size=512"},embedColor:"0x80a0ff"},serverInvite:"https://discord.gg/d24gpB6"}},function(e,a){e.exports=require("http")},function(e,a){e.exports=require("express")},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const o=t(1);t(0),a.send=async function(e,a){let t,n=await o.getUser(e.author.id);try{t=await o.getUser(e.mentions.users.first().id)}catch(e){t=await o.getUser(a[0])}var r="a"==a[1].toLowerCase()?n.money:parseInt(a[1]);return void 0===a[1]||isNaN(r)?e.reply("please supply valid parameters following the syntax `.send <mention/ID> <amount>`."):n?t?JSON.stringify(n)===JSON.stringify(t)?e.reply("you can't send money to yourself!"):!r||r<1?e.reply("this isn't a valid amount."):n.money<r?e.reply("you can't send more money than you own!"):(o.updateValueForUser(n._id,"money",-1*r,"$inc"),o.updateValueForUser(t._id,"money",r,"$inc"),void e.reply("Succesfully sent "+r.commafy()+" "+`money to ${t.tag}.`)):e.reply("this user hasn't created an account yet."):e.reply("you haven't created an account yet, please use `.create` to create one.")},a.deposit=async function(e,a){let t=await o.getUser(e.author.id);await o.getAlliance(t.alliance);var n="a"==a[0]?t.money:parseInt(a[0]);return void 0===a[0]||isNaN(n)?e.reply("please supply valid parameters following the syntax `.deposit <amount>`."):t&&"{}"!==JSON.stringify(t)?t.alliance?!n||n<1?e.reply("this isn't a valid amount."):t.money<n?e.reply("you can't send more money than you own!"):("a"==a[1]?(o.updateValueForAlliance(t.alliance,"money",t.money,"$inc"),o.updateValueForUser(t._id,"money",0,"$set")):(o.updateValueForAlliance(t.alliance,"money",n,"$inc"),o.updateValueForUser(t._id,"money",-1*n,"$inc")),void e.reply("Succesfully sent "+n.commafy()+" money to your alliance.")):e.reply("you haven't joined an alliance yet!"):e.reply("you haven't created an account yet, please use `.create` to create one.")}},function(e,a,t){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a};Object.defineProperty(a,"__esModule",{value:!0});const n=o(t(2)),r=t(1);t(0),a.add=async function(e,a){if(!n.botAdmins.includes(parseInt(e.author.id)))return e.reply("only selected users can use this command. If any problem occured, DM <@393137628083388430>.");if(!a[2])return e.reply("please supply valid parameters following the syntax `.add <type> <mention/ID> <amount>`.");let t=await r.getUser(e.mentions.users.first().id);if(!t)return e.reply("this user hasn't created an account yet.");const o=parseInt(a[2]);if(null==o)return e.reply("this isn't a valid amount.");["money","m"].includes(a[0])?(r.updateValueForUser(t._id,"money",o,"$inc"),e.reply("Succesfully added "+o.commafy()+" "+`money to ${e.mentions.users.first()} balance.`)):["food","f"].includes(a[0])?(r.updateValueForUser(t._id,"food",o,"$inc"),e.reply("Succesfully added "+o.commafy()+" "+`food to ${e.mentions.users.first()} balance.`)):["population","p"].includes(a[0])&&(r.updateValueForUser(t._id,"population",o,"$inc"),e.reply("Succesfully added "+o.commafy()+" "+`population to ${e.mentions.users.first()} balance.`))}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const o=t(1);t(0),a.kill=async function(e,a){if(void 0===a[0]||a[0].isNaN()&&"a"!=a[0]||parseInt(a[0])<0)return e.reply("please specify the amount follow the syntax of `.kill <amount>`.");let t=await o.getUser(e.author.id);if(!t)return e.reply("you haven't created an account yet, please use the `.create` command first.");const n="a"===a[0]?t.resources.population:parseInt(a[0]);return n>t.resources.population?e.reply("you can't kill more population than you own!"):(o.updateValueForUser(e.author.id,"population",-1*n,"$inc"),e.reply(`you succesfully killed ${n.commafy()} people.`))}},function(e,a,t){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a};Object.defineProperty(a,"__esModule",{value:!0});const n=t(0);t(0);const r=t(1),i=o(t(2));a.payout=async function(e,a){var t;if(void 0===a[0])t=await r.getUser(e.author.id);else try{t=await r.getUser(e.mentions.users.first().id)}catch(e){t=await r.getUser(a[0])}var o=0;0!=t.upgrades.population.length&&(t.upgrades.population.includes("UK")&&(o+=5e3),t.upgrades.population.includes("AE")&&(o+=1e4),t.upgrades.population.includes("RU")&&(o+=15e3),t.upgrades.population.includes("EC")&&(o+=25e3),t.upgrades.population.includes("GL")&&(o+=5e4),t.upgrades.population.includes("MS")&&(o+=2e5),t.upgrades.population.includes("US")&&(o+=75e4));var l=0;if(null!=t.alliance){let e=await r.getAlliance(t.alliance);"L"==t.allianceRank?(l=15e3*e.upgrades.af+Math.floor(12e4*e.upgrades.af/(e.members.length+e.coLeaders.length+1))+1e5*e.upgrades.pf+Math.floor(8e5*e.upgrades.pf/(e.members.length+e.coLeaders.length+1))+5e5*e.upgrades.mf+Math.floor(4e6*e.upgrades.mf/(e.members.length+e.coLeaders.length+1)),0==e.coLeaders.length&&(l+=15e3*e.upgrades.af+1e5*e.upgrades.pf+5e5*e.upgrades.mf)):"C"==t.allianceRank?l=7500*e.upgrades.af+Math.floor(12e4*e.upgrades.af/(e.members.length+e.coLeaders.length+1))+25e4*e.upgrades.mf+Math.floor(4e6*e.upgrades.mf/(e.members.length+e.coLeaders.length+1))+5e4*e.upgrades.pf+Math.floor(8e5*e.upgrades.pf/(e.members.length+e.coLeaders.length+1)):"M"==t.allianceRank&&(l=Math.floor(12e4*e.upgrades.af/(e.members.length+e.coLeaders.length+1))+Math.floor(4e6*e.upgrades.mf/(e.members.length+e.coLeaders.length+1))+Math.floor(8e5*e.upgrades.pf/(e.members.length+e.coLeaders.length+1)))}var s=0;t.upgrades.pf.nf>0&&(s+=5e5*t.upgrades.pf.nf),t.upgrades.pf.sf>0&&(s+=1e6*t.upgrades.pf.sf),t.upgrades.pf.sef>0&&(s+=5e6*t.upgrades.pf.sef),t.upgrades.pf.if>0&&(s+=1e7*t.upgrades.pf.if),l+=s,e.channel.send({embed:{color:parseInt(i.properties.embedColor),title:`Next payout stats for ${t.tag}`,fields:[{name:"Population:",value:o.commafy(),inline:!0},{name:"Money",value:`Between ${Math.floor(t.resources.population/15).commafy()} and ${Math.floor(t.resources.population/8).commafy()}`,inline:!0},{name:"Food:",value:l.commafy(),inline:!0},{name:"How much will your population consume next payout?",value:Math.floor(t.resources.population*(2+n.getBaseLog(10,n.getBaseLog(10,n.getBaseLog(3,t.resources.population))))).commafy()}],footer:i.properties.footer,timestamp:new Date}})},a.alliancePayout=async function(e,a){var t,o=[0,0,0];if(void 0===a[0])t=await r.getUser(e.author.id);else try{t=await r.getUser(e.mentions.users.first().id)}catch(e){t=await r.getUser(a[0])}if(!t)return a[0]?e.reply("this user hasn't created an account yet!"):e.reply("you haven't created an account yet, please use `.create` first");var n=await r.getAlliance(t.alliance);return n?(o[0]=15e3*n.upgrades.af+Math.floor(12e4*n.upgrades.af/(n.members.length+n.coLeaders.length+1))+1e5*n.upgrades.pf+Math.floor(8e5*n.upgrades.pf/(n.members.length+n.coLeaders.length+1))+5e5*n.upgrades.mf+Math.floor(4e6*n.upgrades.mf/(n.members.length+n.coLeaders.length+1)),o[1]=7500*n.upgrades.af+Math.floor(12e4*n.upgrades.af/(n.members.length+n.coLeaders.length+1))+5e4*n.upgrades.pf+Math.floor(8e5*n.upgrades.pf/(n.members.length+n.coLeaders.length+1))+25e4*n.upgrades.mf+Math.floor(4e6*n.upgrades.mf/(n.members.length+n.coLeaders.length+1)),o[2]=Math.floor(12e4*n.upgrades.af/(n.members.length+n.coLeaders.length+1))+Math.floor(8e5*n.upgrades.pf/(n.members.length+n.coLeaders.length+1))+Math.floor(4e6*n.upgrades.mf/(n.members.length+n.coLeaders.length+1)),0==n.coLeaders.length&&(o[0]+=15e3*n.upgrades.af+1e5*n.upgrades.pf+5e5*n.upgrades.mf,o[1]=0),0===n.members.length&&(o[0]+=o[2],o[2]=0),e.channel.send({embed:{color:parseInt(i.properties.embedColor),title:`Payout for ${n.name}`,fields:[{name:"The Leader will receive:",value:`${o[0].commafy()} food`},{name:"The Co-Leaders will receive:",value:`${o[1].commafy()} food`},{name:"Members will receive:",value:`${o[2].commafy()} food`}],timestamp:new Date,footer:i.properties.footer}})):a[0]?e.reply("this user hasn't joined an alliance yet"):e.reply("you haven't joined an alliance yet")}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const o=t(1);async function n(e,a,t){let n=await o.getUser(a);return n.money<t?`this items costs ${t.commafy()} coins! You only own ${n.money.commafy()}`:"nf"===e?n.upgrades.pf.nf>=4?"you already own this item four times!":(o.addPF(a,e),o.updateValueForUser(a,"money",-1*t,"$inc"),"Congrats! You just bought a new personal farm"):n.upgrades.pf[e]>=3?"you already own this item three times!":(o.addPF(a,e),o.updateValueForUser(a,"money",-1*t,"$inc"),"Congrats! You just bought a new personal farm!")}async function r(e,a,t){let n=await o.getUser(a);if(n.upgrades.population.includes(e)||n.upgrades.misc.includes(e))return"you already own that item!";if(n.money>=t){switch(o.updateValueForUser(a,"money",-1*t,"$inc"),["UK","AE","RU","EC","GL","MS","US"].includes(e)&&o.addUpgrade(a,e,"population"),e){case"UK":return"you succesfully invaded the UK.";case"AE":return"you succesfully used the Advanced Equipment.";case"RU":return"you succesfully invaded Russia.";case"EC":return"you succesfully expanded your city.";case"GL":return"you succesfully discovered globalization.";case"MS":return"you succesfully recruited more soldiers.";case"US":return"you succesfully invaded the US";default:return"Error!"}}return"You don't have enough money to buy that item."}async function i(e,a,t,n){let r=await o.getUser(a),i=await o.getAlliance(r.alliance);if(!i)return"you haven't joined an alliance yet";if(i=i,"M"==r.allianceRank)return"sorry, you rank isn't high enough to buy upgrades.";if(!(i.money>=t))return"your alliance doesn't have enough money to buy that item.";if("AF"==e){if(i.upgrades.af>=i.level)return"sorry, your alliance level isn't high enough to buy this upgrade another time. Use `.upgradealliance` to increase your alliance level.";o.addAllianceUpgrade(i.name,"af")}else if("PF"==e){if(i.upgrades.pf>=i.level)return"sorry, your alliance level isn't high enough to buy this upgrade another time. Use `.upgradealliance` to increase your alliance level.";o.addAllianceUpgrade(i.name,"pf")}else{if("MF"!=e)return"sorry, an error occured.";if(i.upgrades.mf>=i.level)return"sorry, your alliance level isn't high enough to buy this upgrade another time. Use `.upgradealliance` to increase your alliance level.";o.addAllianceUpgrade(i.name,"mf")}switch(o.updateValueForAlliance(name,"money",-1*t,"$inc"),e){case"AF":return"you successfully bought the arable farming upgrade for your alliance.";case"PF":return"you successfully bought the pastoral farming upgrade for your alliance.";case"MF":return"you successfully bought the mixed farming upgrade for your alliance."}}t(0),a.buy=async function(e,a){let t=await o.getUser(e.author.id);if(!t||0===Object.keys(t).length&&t.constructor===Object)return e.reply("you haven't created an account yet, please use `.create` first");for(var l=0;l<a.length;l++)a[l]=a[l].toLowerCase();if("uk"==a[0]||"invade"==a[0]&&"the"==a[1]&&"uk"==a[2])return e.reply(await r("UK",e.author.id,1e5));if("equipment"==a[0]||"advanced"==a[0]&&"equipment"==a[1])return e.reply(await r("AE",e.author.id,25e4));if("russia"==a[0]||"invade"==a[0]&&"russia"==a[1])return e.reply(await r("RU",e.author.id,5e5));if("city"==a[0]||"expand"==a[0]&&"your"==a[1]&&"city"==a[2]||"expanded"==a[0]&&"city"==a[1])return e.reply(await r("EC",e.author.id,1e6));if("globalization"==a[0])return e.reply(await r("GL",e.author.id,25e5));if("soldiers"==a[0]||"recruit"==a[0]&&"more"==a[1]&&"soldiers"==a[2])return e.reply(await r("MS",e.author.id,1e7));if("us"==a[0]||"invade"==a[0]&&"the"==a[1]&&"us"==a[2])return e.reply(await r("US",e.author.id,5e7));if("food"==a[0]||"a"==a[0]&&"pack"==a[1]&&"of"==a[2]&&"food"==a[3]){let n;return void 0===a[1]||isNaN(parseInt(a[1]))||(n=parseInt(a[1])),void 0===a[1]||isNaN(parseInt(a[4]))||(n=parseInt(a[4])),(isNaN(n)||void 0===n)&&(n=1),t.money>=2e4*n?(o.updateValueForUser(e.author.id,"money",-2e4*n,"$inc"),o.updateValueForUser(e.author.id,"food",5e4*n,"$inc"),e.reply(`you successfully bought ${(5e4*n).commafy()} food for your population.`)):e.reply("you don't have enough money.")}return"arable"==a[0]&&"farming"==a[1]?e.reply(i("AF",t.alliance,1e5,1)):"pastoral"==a[0]&&"farming"==a[1]?e.reply(i("PF",t.alliance,175e4,2)):"mixed"==a[0]&&"farming"==a[1]?e.reply(i("MF",t.alliance,75e5,3)):"nf"==a[0]||"nomadic"==a[0]&&"farming"==a[1]?e.reply(n("nf",e.author.id,75e4)):"sf"==a[0]||"subsistence"==a[0]&&"farming"==a[1]?e.reply(n("sf",e.author.id,275e4)):"sef"==a[0]||"sedentary"==a[0]&&"farming"==a[1]?e.reply(n("sef",e.author.id,75e5)):"if"==a[0]||"intensive"==a[0]&&"farming"==a[1]?e.reply(n("if",e.author.id,15e6)):void 0}},function(e,a,t){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a};Object.defineProperty(a,"__esModule",{value:!0});const n=o(t(2)),r=t(1);async function i(e){let a=await r.getAllUsers(),t=await r.getAllAlliances();return"p"==e?a.sort((e,a)=>a.resources.population-e.resources.population):"f"==e?a.sort((e,a)=>a.resources.food-e.resources.food):"a"==e?t.sort((e,a)=>a.money-e.money):a.sort((e,a)=>a.money-e.money)}async function l(e,a,t){var o,l=a-1;if("p"==e){var u=(p=await i("p")).findIndex((e,a)=>e._id==t.author.id);o={color:parseInt(n.properties.embedColor),title:`Leaderboard sorted by population, ${a} of ${Math.floor(p.length/10)+1}`,description:`Your rank: \`#${u+1}\``,fields:s(l,p,"p"),timestamp:new Date,footer:n.properties.footer}}else if("f"==e){u=(p=await i("f")).findIndex((e,a)=>e._id==t.author.id);o={color:parseInt(n.properties.embedColor),title:`Leaderboard sorted by food, ${a} of ${Math.floor(p.length/10)+1}`,description:`Your rank: \`#${u+1}\``,fields:s(l,p,"f"),timestamp:new Date,footer:n.properties.footer}}else if("a"==e){var c=await i("a");let e=await r.getUser(t.author.id),u=c.findIndex((a,t)=>a.name==e.alliance);var d=-1==u?"-":++u;o={color:parseInt(n.properties.embedColor),title:`Alliance leaderboard sorted by money, ${a} of ${Math.floor(c.length/10)+1}`,fields:s(l,c,"a"),description:`Your rank: \`#${d}\``,timestamp:new Date,footer:n.properties.footer}}else if("w"==e){u=(p=await i("w")).findIndex((e,a)=>e._id==t.author.id);o={color:parseInt(n.properties.embedColor),title:`Leaderboard sorted by wins, ${a} of ${Math.floor(p.length/10)+1}`,description:`Your rank: \`#${u+1}\``,fields:s(l,p,"w"),timestamp:new Date,footer:n.properties.footer}}else{var p;u=(p=await i("m")).findIndex((e,a)=>e._id==t.author.id);o={color:parseInt(n.properties.embedColor),title:`Leaderboard sorted by money, ${a} of ${Math.floor(p.length/10)+1}`,description:`Your rank: \`#${u+1}\``,fields:s(l,p,"m"),timestamp:new Date,footer:n.properties.footer}}return o}function s(e,a,t){var o=a.length-10*e>10?10:a.length-10*e,n=[];if("p"==t)for(var r=0;r<o;r++)n.push({name:"`#"+(r+1+10*e)+"` - "+a[r+10*e].tag,value:a[r+10*e].resources.population.commafy()+" population"});else if("a"==t)for(r=0;r<o;r++)n.push({name:"`#"+(r+1+10*e)+"` "+a[r+10*e].name,value:a[r+10*e].money.commafy()+" coins"});else if("f"==t)for(r=0;r<o;r++)n.push({name:"`#"+(r+1+10*e)+"` "+a[r+10*e].tag,value:a[r+10*e].resources.food.commafy()+" food"});else if("w"==t)for(r=0;r<o;r++)n.push({name:"`#"+(r+1+10*e)+"` "+a[r+10*e].tag,value:a[r+10*e].duelsWon.commafy()+" wins"});else for(r=0;r<o;r++)n.push({name:"`#"+(r+1+10*e)+"` - "+a[r+10*e].tag,value:a[r+10*e].money.commafy()+" coins"});return n}t(0),a.leaderboard=async function(e,a){var t;if("p"==a[0]||"population"==a[0])try{if(t=void 0===a[1]?await l("p",1,e):await l("p",a[1],e),a[1]>Math.floor((await i("p")).length/10)+1||isNaN(a[1])&&void 0!==a[1])return e.reply("this isn't a valid page number!")}catch(a){return console.error(a),e.reply("that isn't a valid page number!")}else if("f"==a[0]||"food"==a[0])try{if(t=void 0===a[1]?await l("f",1,e):await l("f",a[1],e),a[1]>Math.floor((await i("f")).length/10)+1||isNaN(a[1])&&void 0!==a[1])return e.reply("this isn't a valid page number!")}catch(a){return console.error(a),e.reply("that isn't a valid page number!")}else if("alliances"==a[0]||"alliance"==a[0]||"a"==a[0])try{if(t=void 0===a[1]?await l("a",1,e):await l("a",a[1],e),a[1]>Math.floor((await i("a")).length/10)+1||isNaN(a[1])&&void 0!==a[1])return e.reply("this isn't a valid page number!")}catch(a){return console.error(a),e.reply("that isn't a valid page number!")}else if(["wins","duels","w"].includes(a[0]))try{if(t=void 0===a[1]?await l("w",1,e):await l("w",a[1],e),a[1]>Math.floor((await i("w")).length/10)+1||isNaN(a[1])&&void 0!==a[1])return e.reply("this isn't a valid page number!")}catch(a){return console.error(a),e.reply("that isn't a valid page number!")}else if(isNaN(a[0]))try{if(t=void 0===a[1]?await l("m",1,e):await l("m",a[1],e),a[1]>Math.floor((await i("m")).length/10)+1||isNaN(a[1])&&void 0!==a[1])return e.reply("this isn't a valid page number!")}catch(a){return console.error(a),e.reply("that isn't a valid page number!")}else try{if(t=await l("m",a[0],e),a[0]>Math.floor((await i("m")).length/10)+1)return e.reply("this isn't a valid page number!")}catch(a){return console.error(a),e.reply("that isn't a valid page number!")}e.channel.send({embed:t})}},function(e,a,t){"use strict";var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a};Object.defineProperty(a,"__esModule",{value:!0});const n=o(t(2));t(0);const r=t(1);function i(e){return Math.floor(e/8)}a.loancalc=async function(e,a,t){let o=i(t.resources.population),r=Math.floor(1.25*o);return void 0===a[0]?e.channel.send({embed:{color:parseInt(n.properties.embedColor),title:`Maximum loan for ${e.author.tag}`,fields:[{name:"Maximum Loan:",value:o.commafy(),inline:!0},{name:"Total repayment:",value:r.commafy(),inline:!0}],footer:n.properties.footer,timestamp:new Date}}):isNaN(a[0])?e.reply("Please enter a valid amount"):(r=(o=parseInt(a[0]))+Math.floor(.25*o),e.channel.send({embed:{color:parseInt(n.properties.embedColor),title:`Loan for ${e.author.tag}`,fields:[{name:"Loan:",value:o.commafy(),inline:!0},{name:"Total repayment:",value:r.commafy(),inline:!0}],footer:n.properties.footer,timestamp:new Date}}))},a.loan=async function(e,a,t){var o=parseInt(a[0]);if(t.loan)return e.reply("You still owe "+t.loan.commafy()+" coins. Use `.payback` to pay it back");{let n=i(t.resources.population);if(o>n)return e.reply("You can only take upto "+n.commafy()+" coins. Next time use `.loancalc ` ");if(o<=0||"undefined"===o||void 0===a[0])return e.reply("Please enter a valid amount");if(o>0&&o<=n)return r.updateValueForUser(e.author.id,"money",o,"$inc"),r.updateValueForUser(e.author.id,"loan",Math.floor(t.money+1.25*o)),e.reply("Congrats, you took out "+o.commafy()+" coins.")}},a.payback=async function(e,a,t){if((isNaN(a[0])||void 0===a[0]||a[0]<1)&&"a"!==a[0])return e.reply("Please enter valid amount.");if(!t||0===Object.keys(t).length&&t.constructor===Object)return e.reply("you haven't created an account yet, please use `.create` first");if(t.loan){var o="a"===a[0]?t.money:parseInt(a[0]);if(o>t.money)return e.reply("you don't own that much money");if(r.updateValueForUser(e.author.id,"money",t.money+-1*o),t.loan<=o){const a=o-t.loan;return e.reply("you paid in full."),r.updateValueForUser(e.author.id,"loan",0),void r.updateValueForUser(e.author.id,"money",a,"$inc")}return t.loan-=o,r.updateValueForUser(e.author.id,"loan",-1*o,"$inc"),e.reply("Congrats, you paid "+o.commafy()+". You still owe "+t.loan.commafy()+" coins.")}return e.reply("You do not have a loan to repay!")}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const o=t(1);t(0),a.bet=async function(e,a){let t=await o.getUser(e.author.id);if(!t||0===Object.keys(t).length&&t.constructor===Object)return e.reply("you haven't created an account yet, please use `.create` first");if(0===t.money)return e.reply("you don't have any money left!");if(isNaN(a[0])&&"a"!=a[0]&&!a[0].toLowerCase().startsWith("h")&&!a[0].toLowerCase().startsWith("q")||void 0===a[0]||a[0]<1)return e.reply("please enter a valid amount using `.bet <amount>` or `.bet a` to bet all your money.");let n=Math.random()>.5,r="a"==a[0].toLowerCase()?t.money:parseInt(a[0]);if("half"==a[0].toLowerCase()||a[0].toLowerCase().startsWith("h")?r=Math.floor(t.money/2):("quarter"==a[0].toLowerCase()||a[0].toLowerCase().startsWith("q"))&&(r=Math.floor(.25*t.money)),r<1)return e.reply("you can't bet a negative amount");if(r>t.money)return e.reply("you can't bet more money than you own!");let i=n?r:-1*r;n?e.reply("congratulations! You won "+r.commafy()+" coins!"):e.reply("you lost "+r.commafy()+" coins. Try again next time!"),o.updateValueForUser(e.author.id,"money",i,"$inc")}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.purge=async function(e,a){if(!e.member.hasPermission(["MANAGE_MESSAGES"],!1,!0,!0))return e.reply("sorry, this command requires the manage message permission.");const t=parseInt(a[0],10)+1;if(!t||t<1||t>100)return e.reply("Please provide a number between 1 and 100 for the number of messages to delete");const o=await e.channel.fetchMessages({limit:t});e.channel.bulkDelete(o).catch(a=>e.reply(`Couldn't delete messages because of: ${a}`))}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ban=async function(e,a){if(!e.member.hasPermission(["KICK_MEMBERS","BAN_MEMBERS"],!1,!0,!0))return e.reply("this command can only be used by Members who have Kick and Ban permissions");let t=e.mentions.members.first();if(!t)return e.reply("Please mention/ID a valid member of this server");if(!t.bannable)return e.reply("I cannot ban this user! Do they have a higher role? Do I have ban permissions?");let o=a.slice(1).join(" ");o||(o="No reason provided"),await t.ban(o).catch(a=>e.reply(`Sorry ${e.author} I couldn't ban because of : ${a}`)),e.reply(`${t.user.tag} has been banned by ${e.author.tag} because: ${o}`)}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.kick=async function(e,a){if(!e.member.hasPermission(["KICK_MEMBERS"],!1,!0,!0))return e.reply("this command can only be used by Members who have Kick permissions");let t=e.mentions.members.first()||e.guild.members.get(a[0]);if(!t)return e.reply("Please mention/ID a valid member of this server");if(!t.kickable)return e.reply("I cannot kick this user! Do they have a higher role? Do I have kick permissions?");let o=a.slice(1).join(" ");o||(o="No reason provided"),await t.kick(o).catch(a=>e.reply(`Sorry ${e.author} I couldn't kick because of : ${a}`)),e.reply(`${t.user.tag} has been kicked by ${e.author.tag} because: ${o}`)}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const o=t(1),n=t(2);t(0),a.statsEmbed=async function(e,a,t){var r,i,l,s;if(void 0===a[0])l=await o.getUser(e.author.id),s=`${e.author.displayAvatarURL}`;else try{l=await o.getUser(e.mentions.users.first().id),s=`${e.mentions.users.first().displayAvatarURL}`}catch(e){l=await o.getUser(a[0]),s=null===(i=null===(r=null===t||void 0===t?void 0:t.users)||void 0===r?void 0:r.get(l._id.toString()))||void 0===i?void 0:i.displayAvatarURL}if(!l)return void 0!==a[0]?e.reply("you haven't created an account yet, please use `.create` first"):e.reply("this user hasn't created an account yet!");var u=l.alliance;u||(u=void 0===a[0]?"You haven't joined an alliance yet.":l.tag+" hasn't joined an alliance yet."),"M"==l.allianceRank?u="Member of "+u:"C"==l.allianceRank?u="Co-leader of "+u:"L"==l.allianceRank&&(u="Leader of "+u);var c=void 0===a[0]?"You haven't purchased any upgrades yet.":`${l.tag} hasn't purchased any upgrades yet.`;0!=l.upgrades.population.length&&(c="â€‹",l.upgrades.population.includes("UK")&&(c+="UK"),l.upgrades.population.includes("AE")&&(c+=", Equipment"),l.upgrades.population.includes("RU")&&(c+=", Russia"),l.upgrades.population.includes("EC")&&(c+=", Expanded City"),l.upgrades.population.includes("GL")&&(c+=", Globalization"),l.upgrades.population.includes("MS")&&(c+=", More Soldiers"),l.upgrades.population.includes("US")&&(c+=", US")),null==l.resources.food&&(l.resources.food=0);const d=l.upgrades.pf;e.channel.send({embed:{color:parseInt(n.properties.embedColor),title:"Data for "+(void 0===a[0]?`${e.author.tag}`:`${l.tag}`),thumbnail:{url:s},fields:[{name:"Money:",value:l.money.commafy(),inline:!0},{name:"Food:",value:l.resources.food.commafy(),inline:!0},{name:"Population:",value:l.resources.population.commafy(),inline:!0},{name:"Alliance:",value:u,inline:!0},{name:"Personal Farms:",value:`${d.nf} Nomadic Farming\n`+`${d.sf} Subsistence Farming\n`+`${d.sef} Sedentary Farming\n`+`${d.if} Intensive Farming\n`,inline:!0},{name:"Upgrades:",value:c,inline:!0}],timestamp:new Date,footer:n.properties.footer}})}},function(e,a){e.exports=require("mongodb")},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.createUser=function(e){return{tag:e.author.tag,_id:e.author.id,money:1e3,lastWorked:0,lastCrime:0,autoping:!0,payoutDMs:!1,alliance:null,allianceRank:null,resources:{food:1e4,population:1e3},upgrades:{population:[],misc:[],pf:{nf:0,sf:0,sef:0,if:0}},loan:0,inventory:[],votingStreak:1,lastVoted:0}},a.createAlliance=function(e,a){return{name:e,level:1,public:!0,leader:{tag:a.author.tag,_id:a.author.id},money:0,tax:5,coLeaders:[],members:[],upgrades:{af:0,pf:0,mf:0},invitedUsers:[]}}},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const o=t(2);a.helpMenu={color:parseInt(o.properties.embedColor),title:"Welcome to the help menu. Please choose a category",fields:[{name:"General help:",value:"type `.help general` to view the help menu for the general commands"},{name:"Alliance help:",value:"type `.help alliance` to view the alliance help menu"},{name:"Battle help",value:"type `.help battle` to view the battle help menu"},{name:"Miscellaneous help:",value:"type `.help misc` to view the help menu for everything else"},{name:"Moderation help:",value:"type `.help mod` to view the help menu for everything else"},{name:"To view an in-depth guide, use `.guide`",value:"â€‹"}],timestamp:new Date,footer:o.properties.footer},a.generalHelpMenu={color:parseInt(o.properties.embedColor),title:"General help menu",fields:[{name:"`.create`",value:"Create an account and start buidling your Utopia!"},{name:"`.me` or `.stats [mention/ID]`",value:"View your stats or these of other players."},{name:"`.work`",value:"You gain up to 10,000 coins from working. You can work every 30 minutes."},{name:"`.crime`",value:"You can commit a crime every 4 hours. You have a 5% chance to increase your networth by 50,000 coins or up to 5% (whichever is higher), but be careful: you can also lose up to 2% of your current networth."},{name:"`.utopia [mention/ID]`",value:"View how far you've built up your Utopia. The image changes based on your personal farms, population upgrades, total population and more."},{name:"`.lb` or `.leaderboard [type] [page]`",value:"View the global leaderboard. Allowed types are 'allaince', 'wins', 'money', 'food' and 'population'."},{name:"`.shop` or `.store [category]`",value:"View the shop (you'll find further information there)."},{name:"`.buy <item>`",value:"Buy an item from the shop."},{name:"`.use <item>`",value:"Use on of your purchased items."},{name:"`.inventory` or `.inv`",value:"View the items you purchased but haven't used yet."},{name:"`.loan`",value:"Using loan, you can take out money to help you further expand your empire. Use `.loancalc` to see the maximum you can take as a loan, or `.loancalc <number>` to see how much you might owe if you take out a smaller sum. Use `payback [amount]` to pay it back."},{name:"`.send <mention/ID> <amount>`",value:"Send a specific amount of money to another user."},{name:"`.kill <amount>`",value:"Kill a specific amount of your population."},{name:"`.alliance [mention/ID/alliance name]`",value:"View the stats of your alliance or of the alliance of another user."},{name:"`.bet <amount>` or `.coinflip <amount>`",value:"You either gain the amount you bet or you lose it. (Note: use `.bet a` to bet all your money or `.bet h` to bet half of your money)"},{name:"`.payout [mention]`",value:"See how many ressources you or another user will receive during the next payout"}],timestamp:new Date,footer:o.properties.footer},a.allianceHelpMenu={color:parseInt(o.properties.embedColor),title:"Alliance help menu",fields:[{name:"`.createalliance <name>`",value:"Create your own alliance. (Price: 250,000)"},{name:"`.leavealliance`",value:"Leave your current alliance"},{name:"`.joinalliance <name>`",value:"Join an alliance"},{name:"`.promote <mention/ID>` (Leader only)",value:"Promote a member or Co-Leader of your alliance (there is a maximum of two co-leaders)"},{name:"`.demote <mention/ID>` (Leader only)",value:"Demote a member of your alliance."},{name:"`.fire <mention/ID>` (Leader only)",value:"Fire a member of your alliance."},{name:"`.renamealliance <new name>` (Leader and Co-Leaders only)",value:"Rename your alliance."},{name:"`.setpublic` and `.setprivate` (Leader and Co-Leaders only)",value:"Change the setting of your alliance. Public: Everyone can join, Private: Only invited users can join."},{name:"`.invite <mention/ID>` (Leader and Co-Leaders only)",value:"Invite a member to your alliance."},{name:"`.alliancepayout [mention/ID]`",value:"Shows the food division for an alliance."},{name:"`.upgradealliance` (Leader and Co-Leaders only)",value:"Level up your alliance in order to buy more upgrades. A level two alliance can own every farm two times for example. The current maximum is level 4."},{name:"`.alliance [mention/ID/alliance name]`",value:"View the stats of your alliance or of the alliance of another user."},{name:"`.alliancemembers [mention/ID/alliance name]`",value:"See a detailed list of all members and invited users from your alliance or the alliance of another user"},{name:"`.deposit <amount>`",value:"Deposit a specific amount of money in the bank of your alliance"},{name:"`.settax <value between 0 and 90>` (Leader and Co-Leaders only)",value:"Set the taxrate of your alliance. The tax only applies to the work and crime commands."}],timestamp:new Date,footer:o.properties.footer},a.miscHelpMenu={color:parseInt(o.properties.embedColor),title:"Miscellaneous help menu",fields:[{name:"`.autoping`",value:"Enable/Disable autopings when you can work or commit a crime again. (Enabled by default)"},{name:"`.payoutdms`",value:"Enable/Disable DMs when the payouts are given out. (Disabled by default)"},{name:"`.invitelink`",value:"Grab an invite link to add me to your server!"},{name:"`.donate`",value:"Support the bot on Patreon or on PayPal!"},{name:"`.server`",value:"Join the official Utopia server!"},{name:"`.vote`",value:"You can vote every 12h for Utopia on top.gg to get 15k money for free!"},{name:"`.statistics`",value:"View some statistics about the bot"}],timestamp:new Date,footer:o.properties.footer},a.modHelpMenu={color:parseInt(o.properties.embedColor),title:"Moderation help",description:"The bot role needs to be ranked above the roles of the other users in order for these commands to work.",fields:[{name:"`.ban <mention/ID>`",value:"Bans a user from the server."},{name:"`.yeet <mention/ID>` or `.kick <mention/ID>`",value:"Kicks a user from the server"},{name:"`.purge <amount>`",value:"Delete a specific amount of messages (up to 100 at the same time)."}],timestamp:new Date,footer:o.properties.footer},a.guideEmbed={color:parseInt(o.properties.embedColor),title:"In-depth game-guide",description:`If you have any additional questions, feel free to join the official server [here](${o.serverInvite}).`,fields:[{name:"**Starting**",value:"To start your empire, say `.create`."},{name:"**Earning money**",value:"Every 30 minutes you can do `.work`, which gives you up to 10,000 money. `.crime` has 5% to give you 50,000+ money but you can also lose up to 2% of your balance. If you're feeling lucky, you can also gamble by saying `.bet <amount>/a`. You have 50% to earn double your bet and 50% to lose it. To see how much money you have, say `.stats`."},{name:"**Population**",value:"Your population works once every 12 hours, giving you 1 money per 10-20 people and consuming ~2 food per person in the process. You get population by buying upgrades."},{name:"**Upgrades**",value:"When you earn enough money, you can go to a store and finally start getting population. You can see the list of upgrades by saying `.store p` and buy something by saying `.buy <name>`.Since v1.2 there are also personal farms, which produce food only for you, but alliance farms are still stronger"},{name:"**Alliances**",value:"Alliances give you food, but also tax a percentage of your income (0-90%, set by the owner).To join one, say `.joinalliance <name>` (you'll need an invite if you want to join a private alliance). When you're in an alliance, use `.send <mention>` to send money to a fellow member or `.deposit <amount>` if you want to serve the Soviet Union and help your alliance get something. There's also an option to create your own alliance for 250k using `.createalliance <name>`. You can learn how to manage it by saying `.help a`."},{name:"**Battles**",value:"Once you have enough population, money and food you can start dueling. Start a duel by saying `.duel <mention>`, set your troops by saying `.dividetroops <infantry regiments> <cavalry regiments> <artillery regiments>` and confirm it with `.ready`. Each regiment is composed of 1000 troops. The stats for each troop type are:\n-Infantry: 50 coins per regiment to create and 20 food per regiment per round to feed. Has 30 Def and 25 Atk.\n-Infantry: 100 coins per regiment to create and 300 food per regiment per round to feed. 25 HP, 15 Def and 15 Atk.\n-Artillery: 1000 coins per regiment to create and 500 food per regiment per round to feed. 50 HP, 30 Def and 25 Atk.\nYou get a token for every battle you win (with a 12h cooldown). Spend them on troop upgrades in `.store b`.\n"}],timestamp:new Date,footer:{text:o.properties.footer.text+"  â€¢   Written by Astilimos#6295",icon_url:o.properties.footer.icon_url}}},function(e,a){e.exports=require("dblapi.js")},function(e,a){e.exports=require("discord.js")},function(e,a,t){"use strict";(function(e){var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a};Object.defineProperty(a,"__esModule",{value:!0});const n=o(t(21)),r=o(t(2)),i=t(20),l=t(19),s=t(18),u=t(1),c=t(16),d=t(15),p=t(14),m=t(13);t(0);const f=t(12),y=t(11),h=t(10),g=t(9),v=t(8),b=t(7),w=t(6),M=t(5),k=t(4),I=k();I.use(k.static("public"));t(3).createServer(I);const $=new n.Client;I.get("/",(a,t)=>{t.sendFile(e+"/views/index.html")});const U=I.listen(process.env.PORT,()=>{console.log("Your app is listening on port "+U.address().port)});if(r.dbl){const e=new i(r.dbl.token,{webhookServer:U,webhookAuth:r.dbl.auth},$);e.webhook.on("ready",e=>console.log(`Webhook running at http://${e.hostname}:${e.port}${e.path}`)),e.webhook.on("vote",e=>{})}console.log("My prefix is",r.prefix),$.on("ready",()=>{console.log(`Bot has started, with ${$.users.size} users, in ${$.channels.size} channels of ${$.guilds.size} guilds.`),$.user.setActivity(".help | Now with voting streaks!"),u.connectToDB()}),$.on("guildCreate",e=>{console.log(`New guild joined: ${e.name} (id: ${e.id}). This guild has ${e.memberCount} members!`),$.user.setActivity(`.help | ${$.users.size} users on ${$.guilds.size} servers`)}),$.on("guildDelete",e=>{console.log(`I have been removed from: ${e.name} (id: ${e.id})`),$.user.setActivity(`.help | ${$.users.size} users on ${$.guilds.size} servers`)}),$.on("message",async e=>{var a;if(0!==e.content.indexOf(r.prefix)||e.author.bot)return;var t=e.content.slice(r.prefix.length).trim().split(/ +/g);if(!t||0===t.length)return;const o=null===(a=null===t||void 0===t?void 0:t.shift())||void 0===a?void 0:a.toLowerCase();if("ping"===o){const a=await e.channel.send("Ping?");a.edit(`Pong! Latency is ${a.createdTimestamp-e.createdTimestamp}ms. API Latency is ${Math.round($.ping)}ms`)}else if("say"===o){const a=t.join(" ");e.delete().catch(null),e.channel.send(a)}else if("kick"===o||"yeet"===o)d.kick(e,t);else if("ban"===o)p.ban(e,t);else if("purge"===o||"clear"===o)m.purge(e,t);else if("vote"===o){let a=await u.getUser(e.author.id);e.channel.send({embed:{color:parseInt(r.properties.embedColor),title:`Your voting streak: ${a.votingStreak}`,description:"As a reward for voting you will get your streak mulitplied with 15000 as money!\nYou can increase your voting streak every 12h.If you don't vote for more than 24h, you will lose your streak.\n\nClick [here](https://top.gg/bot/619909215997394955/vote) to vote\n"+`You can vote again ${0===a.lastVoted||Date.now()-1e3*a.lastVoted>432e5?"**now**":"in"+new Date(1e3*(43200-(Math.floor(Date.now()/1e3)-a.lastVoted))).toISOString().substr(11,8)}`}})}else if("bet"===o||"coinflip"===o)f.bet(e,t);else if("help"===o)["general","g"].includes(t[0])?e.channel.send({embed:l.generalHelpMenu}):["alliance","alliances","a"].includes(t[0])?e.channel.send({embed:l.allianceHelpMenu}):"misc"==t[0]?e.channel.send({embed:l.miscHelpMenu}):"mod"==t[0]?e.channel.send({embed:l.modHelpMenu}):e.channel.send({embed:l.helpMenu});else if("create"===o){let a=s.createUser(e);u.addUsers([a]),e.reply("You succesfully created an acoount")}else if(["loancalc","lc"].includes(o))y.loancalc(e,t,await u.getUser(e.author.id));else if("me"===o||"stats"===o)e.channel.send({embed:await c.statsEmbed(e,t,$)});else if("createalliance"===o){if(!t[0])return e.reply("please specify a name for your alliance");await u.addAlliance(s.createAlliance(t[0],e)),e.reply("You are now the leader of "+t[0])}else if("lb"===o||"leaderboard"===o)h.leaderboard(e,t);else{if("invitelink"===o)return e.reply("Add me to your server using this link: "+r.properties.inviteLink);if("server"===o)return e.reply("join the official Utopia server for special giveaways, support, bug reporting and more here: "+r.serverInvite);"buy"===o?g.buy(e,t):"payout"===o?v.payout(e,t):"alliancepayout"===o?v.alliancePayout(e,t):"kill"===o?b.kill(e,t):"add"===o?w.add(e,t):"send"===o&&M.send(e,t)}}),$.login(r.token)}).call(this,"/")}]));